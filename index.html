<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Work & Break Timer</title>
    <style>
        body {
            background-color: #121212;
            color: #fff;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }

        .timer-box {
            background-color: #222;
            color: #0f0;
            padding: 20px 30px;
            border-radius: 10px;
            font-size: 24px;
            font-family: monospace;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
            margin-bottom: 20px;
            min-width: 300px;
            text-align: center;
        }

        .button-box {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 10px;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            background-color: #444;
            color: #fff;
        }

        button:hover {
            background-color: #666;
        }

        button:disabled {
            background-color: #333;
            cursor: not-allowed;
        }
    </style>
</head>
<body>

    <div class="timer-box" id="startTimeDisplay">Start Time: --:--:-- | --/--/----</div>
    <div class="timer-box" id="loginTimer">Login Time: 00:00:00</div>
    <div class="timer-box" id="breakTimer">Break Time: 00:00:00</div>
    <div class="timer-box" id="stopTimeDisplay">Stop Time: --:--:-- | --/--/----</div>

    <div class="button-box">
        <button id="startBtn">Start Time</button>
        <button id="loginBtn" disabled>Login Session</button>
        <button id="breakBtn" disabled>Break</button>
        <button id="stopBtn" disabled>Stop Time</button>
    </div>

    <script>
        let isOnBreak = false;
        let isRunning = false;
        let interval;

        let loginStartTime = null;
        let breakStartTime = null;

        let totalLoginTime = 0;
        let totalBreakTime = 0;

        const loginDisplay = document.getElementById('loginTimer');
        const breakDisplay = document.getElementById('breakTimer');
        const startTimeDisplay = document.getElementById('startTimeDisplay');
        const stopTimeDisplay = document.getElementById('stopTimeDisplay');

        const startBtn = document.getElementById('startBtn');
        const loginBtn = document.getElementById('loginBtn');
        const breakBtn = document.getElementById('breakBtn');
        const stopBtn = document.getElementById('stopBtn');

        function formatTime(seconds) {
            const hrs = String(Math.floor(seconds / 3600)).padStart(2, '0');
            const mins = String(Math.floor((seconds % 3600) / 60)).padStart(2, '0');
            const secs = String(seconds % 60).padStart(2, '0');
            return `${hrs}:${mins}:${secs}`;
        }

        function getISTDateTimeString() {
            const now = new Date();
            const utc = now.getTime() + now.getTimezoneOffset() * 60000;
            const istTime = new Date(utc + (5.5 * 60 * 60 * 1000));

            const time = istTime.toLocaleTimeString('en-IN', { hour12: false });
            const date = istTime.toLocaleDateString('en-IN');
            const [day, month, year] = date.split('/');
            const formattedDate = `${day}-${month}-${year}`;

            return `${time} | ${formattedDate}`;
        }

        function updateTimers() {
            const now = Date.now();

            if (isRunning) {
                if (isOnBreak && breakStartTime) {
                    totalBreakTime += now - breakStartTime;
                    breakStartTime = now;
                } else if (!isOnBreak && loginStartTime) {
                    totalLoginTime += now - loginStartTime;
                    loginStartTime = now;
                }

                const loginSecs = Math.floor(totalLoginTime / 1000);
                const breakSecs = Math.floor(totalBreakTime / 1000);

                loginDisplay.textContent = `Login Time: ${formatTime(loginSecs)}`;
                breakDisplay.textContent = `Break Time: ${formatTime(breakSecs)}`;
            }
        }

        startBtn.addEventListener('click', () => {
            const startTime = getISTDateTimeString();
            startTimeDisplay.textContent = `Start Time: ${startTime}`;

            isRunning = true;
            isOnBreak = false;
            loginStartTime = Date.now();

            interval = setInterval(updateTimers, 1000);

            loginBtn.disabled = false;
            breakBtn.disabled = false;
            stopBtn.disabled = false;
            startBtn.disabled = true;
        });

        loginBtn.addEventListener('click', () => {
            if (isOnBreak && breakStartTime) {
                totalBreakTime += Date.now() - breakStartTime;
                breakStartTime = null;
            }
            isOnBreak = false;
            loginStartTime = Date.now();
        });

        breakBtn.addEventListener('click', () => {
            if (!isOnBreak && loginStartTime) {
                totalLoginTime += Date.now() - loginStartTime;
                loginStartTime = null;
            }
            isOnBreak = true;
            breakStartTime = Date.now();
        });

        stopBtn.addEventListener('click', () => {
            clearInterval(interval);
            isRunning = false;

            const now = Date.now();

            if (isOnBreak && breakStartTime) {
                totalBreakTime += now - breakStartTime;
                breakStartTime = null;
            } else if (!isOnBreak && loginStartTime) {
                totalLoginTime += now - loginStartTime;
                loginStartTime = null;
            }

            const loginSecs = Math.floor(totalLoginTime / 1000);
            const breakSecs = Math.floor(totalBreakTime / 1000);

            loginDisplay.textContent = `Login Time: ${formatTime(loginSecs)}`;
            breakDisplay.textContent = `Break Time: ${formatTime(breakSecs)}`;

            const stopTime = getISTDateTimeString();
            stopTimeDisplay.textContent = `Stop Time: ${stopTime}`;

            startBtn.disabled = true;
            loginBtn.disabled = true;
            breakBtn.disabled = true;
            stopBtn.disabled = true;
        });
    </script>

</body>
</html>
